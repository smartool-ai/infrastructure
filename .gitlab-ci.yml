image: registry.gitlab.com/gitlab-org/cloud-deploy/aws-base:latest

stages:
  - deploy_nonprod
  - deploy_prod

deploy_nonprod:
  stage: deploy_nonprod
  only:
    - development
  script:
    - chmod +x scripts/deploy_nonprod.sh
    - ./scripts/deploy_nonprod.sh

deploy_prod:
  stage: deploy_prod
  only:
    - production
  when: manual
  script:
    - chmod +x scripts/deploy_prod.sh
    - ./scripts/deploy_prod.sh